è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

|                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [341. Flatten Nested List Iterator](https://leetcode.com/problems/flatten-nested-list-iterator/) | [341. æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨](https://leetcode.cn/problems/flatten-nested-list-iterator/) |  ğŸŸ    |

**-----------**

PSï¼š[åˆ·é¢˜æ’ä»¶](https://mp.weixin.qq.com/s/OE1zPVPj0V2o82N4HtLQbw) é›†æˆäº†æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘åŠŸèƒ½ï¼ŒæŒ‰ç…§å…¬å¼å’Œå¥—è·¯è®²è§£äº† 150 é“äºŒå‰æ ‘é¢˜ç›®ï¼Œå¯æ‰‹æŠŠæ‰‹å¸¦ä½ åˆ·å®ŒäºŒå‰æ ‘åˆ†ç±»çš„é¢˜ç›®ï¼Œè¿…é€ŸæŒæ¡é€’å½’æ€ç»´ã€‚

ä»Šå¤©æ¥è®²ä¸€é“éå¸¸æœ‰å¯å‘æ€§çš„è®¾è®¡é¢˜ç›®ï¼Œä¸ºä»€ä¹ˆè¯´å®ƒæœ‰å¯å‘æ€§ï¼Œæˆ‘ä»¬åé¢å†è¯´ã€‚

### ä¸€ã€é¢˜ç›®æè¿°

è¿™æ˜¯åŠ›æ‰£ç¬¬ 341 é¢˜ã€Œæ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨ã€ï¼Œæˆ‘æ¥æè¿°ä¸€ä¸‹é¢˜ç›®ï¼š

é¦–å…ˆï¼Œç°åœ¨æœ‰ä¸€ç§æ•°æ®ç»“æ„ `NestedInteger`ï¼Œ**è¿™ä¸ªç»“æ„ä¸­å­˜çš„æ•°æ®å¯èƒ½æ˜¯ä¸€ä¸ª `Integer` æ•´æ•°ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ª `NestedInteger` åˆ—è¡¨**ã€‚æ³¨æ„ï¼Œè¿™ä¸ªåˆ—è¡¨é‡Œé¢è£…ç€çš„æ˜¯ `NestedInteger`ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å¯èƒ½æ˜¯ä¸ªæ•´æ•°ï¼Œå¯èƒ½åˆæ˜¯ä¸ªåˆ—è¡¨ï¼Œè¿™æ ·æ— é™é€’å½’åµŒå¥—ä¸‹å»â€¦â€¦

`NestedInteger` æœ‰å¦‚ä¸‹ APIï¼š

Copy

```java
public class NestedInteger {
    // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false
    public boolean isInteger();

    // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¿”å›è¿™ä¸ªæ•´æ•°ï¼Œå¦åˆ™è¿”å› null
    public Integer getInteger();

    // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ™è¿”å›è¿™ä¸ªåˆ—è¡¨ï¼Œå¦åˆ™è¿”å› null
    public List<NestedInteger> getList();
}
```

æˆ‘ä»¬çš„ç®—æ³•ä¼šè¢«è¾“å…¥ä¸€ä¸ª `NestedInteger` åˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å†™ä¸€ä¸ªè¿­ä»£å™¨ç±»ï¼Œå°†è¿™ä¸ªå¸¦æœ‰åµŒå¥—ç»“æ„ `NestedInteger` çš„åˆ—è¡¨ã€Œæ‹å¹³ã€ï¼š

Copy

```java
public class NestedIterator implements Iterator<Integer> {
    // æ„é€ å™¨è¾“å…¥ä¸€ä¸ª NestedInteger åˆ—è¡¨
    public NestedIterator(List<NestedInteger> nestedList) {}

    // è¿”å›ä¸‹ä¸€ä¸ªæ•´æ•°
    public Integer next() {}

    // æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Ÿ
    public boolean hasNext() {}
}
```

æˆ‘ä»¬å†™çš„è¿™ä¸ªç±»ä¼šè¢«è¿™æ ·è°ƒç”¨ï¼Œ**å…ˆè°ƒç”¨ `hasNext` æ–¹æ³•ï¼Œåè°ƒç”¨ `next` æ–¹æ³•**ï¼š

Copy

```java
NestedIterator i = new NestedIterator(nestedList);
while (i.hasNext())
    print(i.next());
```

![img](images/title.jpg)

æ¯”å¦‚ç¤ºä¾‹ 1ï¼Œè¾“å…¥çš„åˆ—è¡¨é‡Œæœ‰ä¸‰ä¸ª `NestedInteger`ï¼Œä¸¤ä¸ªåˆ—è¡¨å‹çš„ `NestedInteger` å’Œä¸€ä¸ªæ•´æ•°å‹çš„ `NestedInteger`ã€‚

å­¦è¿‡è®¾è®¡æ¨¡å¼çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œè¿­ä»£å™¨ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œç›®çš„å°±æ˜¯ä¸ºè°ƒç”¨è€…å±è”½åº•å±‚æ•°æ®ç»“æ„çš„ç»†èŠ‚ï¼Œç®€å•åœ°é€šè¿‡ `hasNext` å’Œ `next` æ–¹æ³•æœ‰åºåœ°è¿›è¡Œéå†ã€‚

ä¸ºä»€ä¹ˆè¯´è¿™ä¸ªé¢˜ç›®å¾ˆæœ‰å¯å‘æ€§å‘¢ï¼Ÿå› ä¸ºæˆ‘æœ€è¿‘åœ¨ç”¨ä¸€æ¬¾ç±»ä¼¼å°è±¡ç¬”è®°çš„è½¯ä»¶ï¼Œå«åš Notionï¼ˆæŒºæœ‰åçš„ï¼‰ã€‚è¿™ä¸ªè½¯ä»¶çš„ä¸€ä¸ªäº®ç‚¹å°±æ˜¯ã€Œä¸‡ç‰©çš† blockã€ï¼Œæ¯”å¦‚è¯´æ ‡é¢˜ã€é¡µé¢ã€è¡¨æ ¼éƒ½æ˜¯ blockã€‚æœ‰çš„ block ç”šè‡³å¯ä»¥æ— é™åµŒå¥—ï¼Œè¿™å°±æ‰“ç ´äº†ä¼ ç»Ÿç¬”è®°æœ¬ã€Œæ–‡ä»¶å¤¹ã€->ã€Œç¬”è®°æœ¬ã€->ã€Œç¬”è®°ã€çš„ä¸‰å±‚ç»“æ„ã€‚

å›æƒ³è¿™ä¸ªç®—æ³•é—®é¢˜ï¼Œ`NestedInteger` ç»“æ„å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§æ”¯æŒæ— é™åµŒå¥—çš„ç»“æ„ï¼Œè€Œä¸”å¯ä»¥åŒæ—¶è¡¨ç¤ºæ•´æ•°å’Œåˆ—è¡¨ä¸¤ç§ä¸åŒç±»å‹ï¼Œæˆ‘æƒ³ Notion çš„æ ¸å¿ƒæ•°æ®ç»“æ„ block ä¼°è®¡ä¹Ÿæ˜¯è¿™æ ·çš„ä¸€ç§è®¾è®¡æ€è·¯ã€‚

é‚£ä¹ˆè¯è¯´å›æ¥ï¼Œå¯¹äºè¿™ä¸ªç®—æ³•é—®é¢˜ï¼Œæˆ‘ä»¬æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ`NestedInteger` ç»“æ„å¯ä»¥æ— é™åµŒå¥—ï¼Œæ€ä¹ˆæŠŠè¿™ä¸ªç»“æ„ã€Œæ‰“å¹³ã€ï¼Œä¸ºè¿­ä»£å™¨çš„è°ƒç”¨è€…å±è”½åº•å±‚ç»†èŠ‚ï¼Œå¾—åˆ°æ‰å¹³åŒ–çš„è¾“å‡ºå‘¢ï¼Ÿ

### äºŒã€è§£é¢˜æ€è·¯

æ˜¾ç„¶ï¼Œ`NestedInteger` è¿™ä¸ªç¥å¥‡çš„æ•°æ®ç»“æ„æ˜¯é—®é¢˜çš„å…³é”®ï¼Œä¸è¿‡é¢˜ç›®ä¸“é—¨æé†’æˆ‘ä»¬ï¼š

Copy

```
You should not implement it, or speculate about its implementation.
```

æˆ‘ä¸åº”è¯¥å»å°è¯•å®ç° `NestedInteger` è¿™ä¸ªç»“æ„ï¼Œä¹Ÿä¸åº”è¯¥å»çŒœæµ‹å®ƒçš„å®ç°ï¼Ÿ**ä¸ºä»€ä¹ˆï¼Ÿå‡­ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯é¢˜ç›®åœ¨è¯¯å¯¼æˆ‘ï¼Ÿæ˜¯ä¸æ˜¯æˆ‘è¿›è¡Œæ¨æµ‹ä¹‹åï¼Œè¿™é“é¢˜å°±ä¸æ”»è‡ªç ´**äº†ï¼Ÿ

ä½ ä¸è®©æ¨æµ‹ï¼Œæˆ‘å°±ååè¦å»æ¨æµ‹ï¼æˆ‘åæ‰‹å°±æŠŠ `NestedInteger` è¿™ä¸ªç»“æ„ç»™å®ç°å‡ºæ¥ï¼š

Copy

```java
public class NestedInteger {
    private Integer val;
    private List<NestedInteger> list;

    public NestedInteger(Integer val) {
        this.val = val;
        this.list = null;
    }
    public NestedInteger(List<NestedInteger> list) {
        this.list = list;
        this.val = null;
    }

    // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false
    public boolean isInteger() {
        return val != null;
    }

    // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¿”å›è¿™ä¸ªæ•´æ•°ï¼Œå¦åˆ™è¿”å› null
    public Integer getInteger() {
        return this.val;
    }

    // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ™è¿”å›è¿™ä¸ªåˆ—è¡¨ï¼Œå¦åˆ™è¿”å› null
    public List<NestedInteger> getList() {
        return this.list;
    }
}
```

å—¯ï¼Œå…¶å®è¿™ä¸ªå®ç°ä¹Ÿä¸éš¾å˜›ï¼Œå†™å‡ºæ¥ä¹‹åï¼Œæˆ‘ä¸ç¦ç¿»å‡ºå‰æ–‡ [å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„æ¡†æ¶æ€ç»´](https://labuladong.github.io/article/fname.html?fname=å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„é«˜æ•ˆæ–¹æ³•)ï¼Œå‘ç°è¿™ç©æ„å„¿ç«Ÿç„¶â€¦â€¦

Copy

```java
class NestedInteger {
    Integer val;
    List<NestedInteger> list;
}

/* åŸºæœ¬çš„ N å‰æ ‘èŠ‚ç‚¹ */
class TreeNode {
    int val;
    TreeNode[] children;
}
```

**è¿™ç©æ„å„¿ä¸å°±æ˜¯æ£µ N å‰æ ‘å—ï¼Ÿå¶å­èŠ‚ç‚¹æ˜¯ `Integer` ç±»å‹ï¼Œå…¶ `val` å­—æ®µéç©ºï¼›å…¶ä»–èŠ‚ç‚¹éƒ½æ˜¯ `List<NestedInteger>` ç±»å‹ï¼Œå…¶ `val` å­—æ®µä¸ºç©ºï¼Œä½†æ˜¯ `list` å­—æ®µéç©ºï¼Œè£…ç€å­©å­èŠ‚ç‚¹**ã€‚

æ¯”å¦‚è¯´è¾“å…¥æ˜¯ `[[1,1],2,[1,1]]`ï¼Œå…¶å®å°±æ˜¯å¦‚ä¸‹æ ‘çŠ¶ç»“æ„ï¼š

![img](images/1.jpeg)

å¥½çš„ï¼Œåˆšæ‰é¢˜ç›®è¯´ä»€ä¹ˆæ¥ç€ï¼ŸæŠŠä¸€ä¸ª `NestedInteger` æ‰å¹³åŒ–å¯¹å§ï¼Ÿ**è¿™ä¸å°±ç­‰ä»·äºéå†ä¸€æ£µ N å‰æ ‘çš„æ‰€æœ‰ã€Œå¶å­èŠ‚ç‚¹ã€å—**ï¼Ÿæˆ‘æŠŠæ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½æ‹¿å‡ºæ¥ï¼Œä¸å°±å¯ä»¥ä½œä¸ºè¿­ä»£å™¨è¿›è¡Œéå†äº†å—ï¼Ÿ

N å‰æ ‘çš„éå†æ€ä¹ˆæ•´ï¼Ÿæˆ‘åˆä¸ç¦ç¿»å‡ºå‰æ–‡ [å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„æ¡†æ¶æ€ç»´](https://labuladong.github.io/article/fname.html?fname=å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çš„é«˜æ•ˆæ–¹æ³•) æ‰¾å‡ºæ¡†æ¶ï¼š

Copy

```java
void traverse(TreeNode root) {
    for (TreeNode child : root.children)
        traverse(child);
```

è¿™ä¸ªæ¡†æ¶å¯ä»¥éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œè€Œæˆ‘ä»¬åªå¯¹æ•´æ•°å‹çš„ `NestedInteger` æ„Ÿå…´è¶£ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åªæƒ³è¦ã€Œå¶å­èŠ‚ç‚¹ã€ï¼Œæ‰€ä»¥ `traverse` å‡½æ•°åªè¦åœ¨åˆ°è¾¾å¶å­èŠ‚ç‚¹çš„æ—¶å€™æŠŠ `val` åŠ å…¥ç»“æœåˆ—è¡¨å³å¯ï¼š

Copy

```java
class NestedIterator implements Iterator<Integer> {

    private Iterator<Integer> it;

    public NestedIterator(List<NestedInteger> nestedList) {
        // å­˜æ”¾å°† nestedList æ‰“å¹³çš„ç»“æœ
        List<Integer> result = new LinkedList<>();
        for (NestedInteger node : nestedList) {
            // ä»¥æ¯ä¸ªèŠ‚ç‚¹ä¸ºæ ¹éå†
            traverse(node, result);
        }
        // å¾—åˆ° result åˆ—è¡¨çš„è¿­ä»£å™¨
        this.it = result.iterator();
    }

    public Integer next() {
        return it.next();
    }

    public boolean hasNext() {
        return it.hasNext();
    }    

    // éå†ä»¥ root ä¸ºæ ¹çš„å¤šå‰æ ‘ï¼Œå°†å¶å­èŠ‚ç‚¹çš„å€¼åŠ å…¥ result åˆ—è¡¨
    private void traverse(NestedInteger root, List<Integer> result) {
        if (root.isInteger()) {
            // åˆ°è¾¾å¶å­èŠ‚ç‚¹
            result.add(root.getInteger());
            return;
        }
        // éå†æ¡†æ¶
        for (NestedInteger child : root.getList()) {
            traverse(child, result);
        }
    }
}
```

è¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠåŸé—®é¢˜å·§å¦™è½¬åŒ–æˆäº†ä¸€ä¸ª N å‰æ ‘çš„éå†é—®é¢˜ï¼Œå¹¶ä¸”å¾—åˆ°äº†è§£æ³•ã€‚

### ä¸‰ã€è¿›é˜¶æ€è·¯

ä»¥ä¸Šè§£æ³•è™½ç„¶å¯ä»¥é€šè¿‡ï¼Œä½†æ˜¯åœ¨é¢è¯•ä¸­ï¼Œä¹Ÿè®¸æ˜¯æœ‰ç‘•ç–µçš„ã€‚

æˆ‘ä»¬çš„è§£æ³•ä¸­ï¼Œä¸€æ¬¡æ€§ç®—å‡ºäº†æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„å€¼ï¼Œå…¨éƒ¨è£…åˆ° `result` åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ä¸­ï¼Œ`next` å’Œ `hasNext` æ–¹æ³•åªæ˜¯åœ¨å¯¹ `result` åˆ—è¡¨åšè¿­ä»£ã€‚å¦‚æœè¾“å…¥çš„è§„æ¨¡éå¸¸å¤§ï¼Œæ„é€ å‡½æ•°ä¸­çš„è®¡ç®—å°±ä¼šå¾ˆæ…¢ï¼Œè€Œä¸”å¾ˆå ç”¨å†…å­˜ã€‚

ä¸€èˆ¬çš„è¿­ä»£å™¨æ±‚å€¼åº”è¯¥æ˜¯ã€Œæƒ°æ€§çš„ã€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è¦ä¸€ä¸ªç»“æœï¼Œæˆ‘å°±ç®—ä¸€ä¸ªï¼ˆæˆ–æ˜¯ä¸€å°éƒ¨åˆ†ï¼‰ç»“æœå‡ºæ¥ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æŠŠæ‰€æœ‰ç»“æœéƒ½ç®—å‡ºæ¥ã€‚

å¦‚æœæƒ³åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨é€’å½’å‡½æ•°è¿›è¡Œ DFS éå†è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œè€Œä¸”æˆ‘ä»¬å…¶å®åªå…³å¿ƒã€Œå¶å­èŠ‚ç‚¹ã€ï¼Œæ‰€ä»¥ä¼ ç»Ÿçš„ BFS ç®—æ³•ä¹Ÿä¸è¡Œã€‚å®é™…çš„æ€è·¯å¾ˆç®€å•ï¼š

**è°ƒç”¨ `hasNext` æ—¶ï¼Œå¦‚æœ `nestedList` çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åˆ—è¡¨ç±»å‹ï¼Œåˆ™ä¸æ–­å±•å¼€è¿™ä¸ªå…ƒç´ ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•´æ•°ç±»å‹**ã€‚

ç”±äºè°ƒç”¨ `next` æ–¹æ³•ä¹‹å‰ä¸€å®šä¼šè°ƒç”¨ `hasNext` æ–¹æ³•ï¼Œè¿™å°±å¯ä»¥ä¿è¯æ¯æ¬¡è°ƒç”¨ `next` æ–¹æ³•çš„æ—¶å€™ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•´æ•°å‹ï¼Œç›´æ¥è¿”å›å¹¶åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å³å¯ã€‚

çœ‹ä¸€ä¸‹ä»£ç ï¼š

Copy

```java
public class NestedIterator implements Iterator<Integer> {
    private LinkedList<NestedInteger> list;

    public NestedIterator(List<NestedInteger> nestedList) {
        // ä¸ç›´æ¥ç”¨ nestedList çš„å¼•ç”¨ï¼Œæ˜¯å› ä¸ºä¸èƒ½ç¡®å®šå®ƒçš„åº•å±‚å®ç°
        // å¿…é¡»ä¿è¯æ˜¯ LinkedListï¼Œå¦åˆ™ä¸‹é¢çš„ addFirst ä¼šå¾ˆä½æ•ˆ
        list = new LinkedList<>(nestedList);
    }

    public Integer next() {
        // hasNext æ–¹æ³•ä¿è¯äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¸€å®šæ˜¯æ•´æ•°ç±»å‹
        return list.remove(0).getInteger();
    }

    public boolean hasNext() {
        // å¾ªç¯æ‹†åˆ†åˆ—è¡¨å…ƒç´ ï¼Œç›´åˆ°åˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•´æ•°ç±»å‹
        while (!list.isEmpty() && !list.get(0).isInteger()) {
            // å½“åˆ—è¡¨å¼€å¤´ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åˆ—è¡¨ç±»å‹æ—¶ï¼Œè¿›å…¥å¾ªç¯
            List<NestedInteger> first = list.remove(0).getList();
            // å°†ç¬¬ä¸€ä¸ªåˆ—è¡¨æ‰“å¹³å¹¶æŒ‰é¡ºåºæ·»åŠ åˆ°å¼€å¤´
            for (int i = first.size() - 1; i >= 0; i--) {
                list.addFirst(first.get(i));
            }
        }
        return !list.isEmpty();
    }
}
```

ä»¥è¿™ç§æ–¹æ³•ï¼Œç¬¦åˆè¿­ä»£å™¨æƒ°æ€§æ±‚å€¼çš„ç‰¹æ€§ï¼Œæ˜¯æ¯”è¾ƒå¥½çš„è§£æ³•ã€‚